{"ast":null,"code":"import React,{useState}from'react';import'./TransactionTableEnhanced.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionTableEnhanced=_ref=>{let{transactions,suspiciousTransactions=[]}=_ref;const[expandedRows,setExpandedRows]=useState(new Set());const[sortConfig,setSortConfig]=useState({key:'date',direction:'desc'});// Debug: Log suspicious transactions\nconsole.log('=== SUSPICIOUS TRANSACTIONS DEBUG ===');console.log('Total suspicious:',suspiciousTransactions.length);console.log('Suspicious data:',suspiciousTransactions);// Create a map of suspicious transactions by line number for quick lookup\nconst suspiciousMap={};suspiciousTransactions.forEach(suspicious=>{if(suspicious.lineNumber){suspiciousMap[suspicious.lineNumber]=suspicious;console.log(\"Mapped line \".concat(suspicious.lineNumber,\":\"),suspicious);}});console.log('Suspicious map:',suspiciousMap);console.log('Sample transaction lineNumbers:',transactions.slice(0,5).map(t=>t.lineNumber||t.originalLineNumber));if(!transactions||transactions.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"no-transactions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No transactions to display with current filters.\"})});}const formatCurrency=amount=>{if(amount===null||amount===undefined)return'-';return new Intl.NumberFormat('en-ZA',{style:'currency',currency:'ZAR',minimumFractionDigits:2,maximumFractionDigits:2}).format(amount);};const formatCrypto=function(amount){let decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:8;if(amount===null||amount===undefined)return'-';return parseFloat(amount).toFixed(decimals).replace(/\\.?0+$/,'');};const formatDate=dateString=>{if(!dateString)return'-';const date=new Date(dateString);return date.toLocaleDateString('en-ZA',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const toggleRow=index=>{const newExpanded=new Set(expandedRows);if(newExpanded.has(index)){newExpanded.delete(index);}else{newExpanded.add(index);}setExpandedRows(newExpanded);};const toggleExpandAll=()=>{if(expandedRows.size>0){setExpandedRows(new Set());}else{setExpandedRows(new Set(transactions.map((_,idx)=>idx)));}};const handleSort=key=>{let direction='asc';if(sortConfig.key===key&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key,direction});};const sortedTransactions=[...transactions].sort((a,b)=>{const aVal=a[sortConfig.key];const bVal=b[sortConfig.key];if(aVal===bVal)return 0;const comparison=aVal<bVal?-1:1;return sortConfig.direction==='asc'?comparison:-comparison;});const getTypeBadgeClass=type=>{switch(type===null||type===void 0?void 0:type.toUpperCase()){case'BUY':return'badge-buy';case'SELL':return'badge-sell';case'TRADE':case'TRADE_SELL':case'TRADE_BUY':return'badge-trade';default:return'';}};const getSortIcon=key=>{if(sortConfig.key!==key)return'‚áÖ';return sortConfig.direction==='asc'?'‚Üë':'‚Üì';};return/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-table-enhanced\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transaction Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-sm\",onClick:toggleExpandAll,children:expandedRows.size>0?'‚¨Ü Collapse All':'‚¨á Expand All'}),/*#__PURE__*/_jsxs(\"span\",{className:\"transaction-count\",children:[transactions.length,\" transactions\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"transaction-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"expand-header\"}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('date'),children:[\"Date \",getSortIcon('date')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('type'),children:[\"Type \",getSortIcon('type')]}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('proceeds'),children:[\"Proceeds \",getSortIcon('proceeds')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('costBase'),children:[\"Cost Base \",getSortIcon('costBase')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('capitalGain'),children:[\"Gain/Loss \",getSortIcon('capitalGain')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('taxYear'),children:[\"Tax Year \",getSortIcon('taxYear')]})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedTransactions.map((tx,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"transaction-row \".concat(expandedRows.has(index)?'expanded':''),onClick:()=>toggleRow(index),children:[/*#__PURE__*/_jsx(\"td\",{className:\"expand-cell\",children:/*#__PURE__*/_jsx(\"button\",{className:\"expand-btn\",children:expandedRows.has(index)?'‚ñº':'‚ñ∂'})}),/*#__PURE__*/_jsx(\"td\",{className:\"date-cell\",children:formatDate(tx.date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getTypeBadgeClass(tx.type)),children:tx.type})}),/*#__PURE__*/_jsxs(\"td\",{className:\"status-cell\",children:[tx.type==='TRANSFER'&&/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-non-taxable\",title:\"Non-taxable transfer\",children:\"\\uD83D\\uDD04 Non-Taxable\"}),suspiciousMap[tx.lineNumber||tx.originalLineNumber]&&/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-warning\",title:suspiciousMap[tx.lineNumber||tx.originalLineNumber].issues.map(i=>i.description).join(', '),children:\"\\u26A0\\uFE0F Flagged\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"currency-cell\",children:tx.currency}),/*#__PURE__*/_jsx(\"td\",{className:\"amount-cell\",children:formatCrypto(tx.amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"proceeds-cell\",children:tx.proceeds!==null&&tx.proceeds!==undefined?formatCurrency(tx.proceeds):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"cost-cell\",children:tx.costBase!==null&&tx.costBase!==undefined?formatCurrency(tx.costBase):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"gain-cell \".concat(tx.capitalGain>0?'positive':tx.capitalGain<0?'negative':''),children:tx.capitalGain!==null&&tx.capitalGain!==undefined?formatCurrency(tx.capitalGain):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"tax-year-cell\",children:tx.taxYear||'-'})]}),expandedRows.has(index)&&/*#__PURE__*/_jsx(\"tr\",{className:\"expanded-detail-row\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"expanded-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"detail-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Transaction Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Line Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:tx.lineNumber||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Wallet:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:tx.wallet||'Default'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Fee:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.fee||0)})]}),tx.totalCost&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Total Cost:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.totalCost)})]}),tx.costPerUnit&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Cost Per Unit:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.costPerUnit)})]})]})]}),tx.lotsConsumed&&tx.lotsConsumed.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section fifo-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"FIFO Lots Consumed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fifo-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"fifo-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Acquired Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Used\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost Per Unit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost Base\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age (Days)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wallet\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tx.lotsConsumed.map((lot,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"fifo-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(lot.purchaseDate)}),/*#__PURE__*/_jsx(\"td\",{children:formatCrypto(lot.amountConsumed)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(lot.costPerUnit)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(lot.costBase)}),/*#__PURE__*/_jsx(\"td\",{children:lot.ageInDays||'-'}),/*#__PURE__*/_jsx(\"td\",{children:lot.wallet||'-'})]},idx))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"fifo-total\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(tx.lotsConsumed.reduce((sum,lot)=>sum+lot.costBase,0))})}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"fifo-explanation\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FIFO Method:\"}),\" The oldest lots (First In) are consumed first (First Out) to calculate the cost base for this disposal.\"]})})]}),tx.capitalGain!==null&&tx.capitalGain!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section calculation-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Capital Gain Calculation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calculation-breakdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Proceeds (after fees):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value\",children:formatCurrency(tx.proceeds)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Cost Base (FIFO):\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"calc-value\",children:[\"- \",formatCurrency(tx.costBase)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row calc-total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Capital Gain/Loss:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value \".concat(tx.capitalGain>=0?'positive':'negative'),children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(tx.capitalGain)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row calc-taxable\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Taxable (40% inclusion):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value\",children:formatCurrency(tx.capitalGain>=0?tx.capitalGain*0.4:0)})]})]})]}),suspiciousMap[tx.lineNumber||tx.originalLineNumber]&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section warning-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u26A0\\uFE0F Transaction Flagged for Review\"}),/*#__PURE__*/_jsx(\"div\",{className:\"warning-list\",children:suspiciousMap[tx.lineNumber||tx.originalLineNumber].issues.map((issue,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"warning-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"warning-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"warning-category\",children:issue.category}),/*#__PURE__*/_jsx(\"span\",{className:\"warning-severity \".concat(issue.severity.toLowerCase()),children:issue.severity})]}),/*#__PURE__*/_jsx(\"p\",{className:\"warning-description\",children:issue.description}),issue.recommendation&&/*#__PURE__*/_jsxs(\"p\",{className:\"warning-recommendation\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Recommendation:\"}),\" \",issue.recommendation]})]},idx))})]}),tx.type==='TRANSFER'&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section transfer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDD04 Transfer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box non-taxable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Non-Taxable Event\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This transfer does not trigger a capital gains tax event. The cost basis is preserved when moving assets between wallets.\"})]})]}),tx.wallet&&tx.wallet.includes('->')&&/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-flow\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"wallet-label\",children:\"From:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"wallet-name\",children:tx.wallet.split('->')[0]}),/*#__PURE__*/_jsx(\"span\",{className:\"arrow\",children:\"\\u2192\"}),/*#__PURE__*/_jsx(\"span\",{className:\"wallet-label\",children:\"To:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"wallet-name\",children:tx.wallet.split('->')[1]})]})]})]})]})})})})]},index))})]})})]});};export default TransactionTableEnhanced;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","TransactionTableEnhanced","_ref","transactions","suspiciousTransactions","expandedRows","setExpandedRows","Set","sortConfig","setSortConfig","key","direction","console","log","length","suspiciousMap","forEach","suspicious","lineNumber","concat","slice","map","t","originalLineNumber","className","children","formatCurrency","amount","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatCrypto","decimals","arguments","parseFloat","toFixed","replace","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","toggleRow","index","newExpanded","has","delete","add","toggleExpandAll","size","_","idx","handleSort","sortedTransactions","sort","a","b","aVal","bVal","comparison","getTypeBadgeClass","type","toUpperCase","getSortIcon","onClick","tx","Fragment","title","issues","i","description","join","proceeds","costBase","capitalGain","taxYear","colSpan","wallet","fee","totalCost","costPerUnit","lotsConsumed","lot","purchaseDate","amountConsumed","ageInDays","reduce","sum","issue","category","severity","toLowerCase","recommendation","includes","split"],"sources":["C:/Users/Baloyi PA/Desktop/TaxTim-Team-6-New/TaxTim-Team-6-New/frontend/src/components/TransactionTableEnhanced.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './TransactionTableEnhanced.css';\r\n\r\nconst TransactionTableEnhanced = ({ transactions, suspiciousTransactions = [] }) => {\r\n  const [expandedRows, setExpandedRows] = useState(new Set());\r\n  const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });\r\n\r\n  // Debug: Log suspicious transactions\r\n  console.log('=== SUSPICIOUS TRANSACTIONS DEBUG ===');\r\n  console.log('Total suspicious:', suspiciousTransactions.length);\r\n  console.log('Suspicious data:', suspiciousTransactions);\r\n  \r\n  // Create a map of suspicious transactions by line number for quick lookup\r\n  const suspiciousMap = {};\r\n  suspiciousTransactions.forEach(suspicious => {\r\n    if (suspicious.lineNumber) {\r\n      suspiciousMap[suspicious.lineNumber] = suspicious;\r\n      console.log(`Mapped line ${suspicious.lineNumber}:`, suspicious);\r\n    }\r\n  });\r\n  \r\n  console.log('Suspicious map:', suspiciousMap);\r\n  console.log('Sample transaction lineNumbers:', transactions.slice(0, 5).map(t => t.lineNumber || t.originalLineNumber));\r\n\r\n  if (!transactions || transactions.length === 0) {\r\n    return (\r\n      <div className=\"no-transactions\">\r\n        <p>No transactions to display with current filters.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (amount === null || amount === undefined) return '-';\r\n    return new Intl.NumberFormat('en-ZA', {\r\n      style: 'currency',\r\n      currency: 'ZAR',\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatCrypto = (amount, decimals = 8) => {\r\n    if (amount === null || amount === undefined) return '-';\r\n    return parseFloat(amount).toFixed(decimals).replace(/\\.?0+$/, '');\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '-';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-ZA', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const toggleRow = (index) => {\r\n    const newExpanded = new Set(expandedRows);\r\n    if (newExpanded.has(index)) {\r\n      newExpanded.delete(index);\r\n    } else {\r\n      newExpanded.add(index);\r\n    }\r\n    setExpandedRows(newExpanded);\r\n  };\r\n\r\n  const toggleExpandAll = () => {\r\n    if (expandedRows.size > 0) {\r\n      setExpandedRows(new Set());\r\n    } else {\r\n      setExpandedRows(new Set(transactions.map((_, idx) => idx)));\r\n    }\r\n  };\r\n\r\n  const handleSort = (key) => {\r\n    let direction = 'asc';\r\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const aVal = a[sortConfig.key];\r\n    const bVal = b[sortConfig.key];\r\n    \r\n    if (aVal === bVal) return 0;\r\n    \r\n    const comparison = aVal < bVal ? -1 : 1;\r\n    return sortConfig.direction === 'asc' ? comparison : -comparison;\r\n  });\r\n\r\n  const getTypeBadgeClass = (type) => {\r\n    switch (type?.toUpperCase()) {\r\n      case 'BUY':\r\n        return 'badge-buy';\r\n      case 'SELL':\r\n        return 'badge-sell';\r\n      case 'TRADE':\r\n      case 'TRADE_SELL':\r\n      case 'TRADE_BUY':\r\n        return 'badge-trade';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getSortIcon = (key) => {\r\n    if (sortConfig.key !== key) return '‚áÖ';\r\n    return sortConfig.direction === 'asc' ? '‚Üë' : '‚Üì';\r\n  };\r\n\r\n  return (\r\n    <div className=\"transaction-table-enhanced\">\r\n      <div className=\"table-header-section\">\r\n        <h2>Transaction Details</h2>\r\n        <div className=\"table-actions\">\r\n          <button className=\"btn btn-secondary btn-sm\" onClick={toggleExpandAll}>\r\n            {expandedRows.size > 0 ? '‚¨Ü Collapse All' : '‚¨á Expand All'}\r\n          </button>\r\n          <span className=\"transaction-count\">{transactions.length} transactions</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"table-wrapper\">\r\n        <table className=\"transaction-table\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"expand-header\"></th>\r\n              <th className=\"sortable\" onClick={() => handleSort('date')}>\r\n                Date {getSortIcon('date')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('type')}>\r\n                Type {getSortIcon('type')}\r\n              </th>\r\n              <th>Status</th>\r\n              <th>Currency</th>\r\n              <th>Amount</th>\r\n              <th className=\"sortable\" onClick={() => handleSort('proceeds')}>\r\n                Proceeds {getSortIcon('proceeds')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('costBase')}>\r\n                Cost Base {getSortIcon('costBase')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('capitalGain')}>\r\n                Gain/Loss {getSortIcon('capitalGain')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('taxYear')}>\r\n                Tax Year {getSortIcon('taxYear')}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sortedTransactions.map((tx, index) => (\r\n              <React.Fragment key={index}>\r\n                <tr \r\n                  className={`transaction-row ${expandedRows.has(index) ? 'expanded' : ''}`}\r\n                  onClick={() => toggleRow(index)}\r\n                >\r\n                  <td className=\"expand-cell\">\r\n                    <button className=\"expand-btn\">\r\n                      {expandedRows.has(index) ? '‚ñº' : '‚ñ∂'}\r\n                    </button>\r\n                  </td>\r\n                  <td className=\"date-cell\">{formatDate(tx.date)}</td>\r\n                  <td>\r\n                    <span className={`badge ${getTypeBadgeClass(tx.type)}`}>\r\n                      {tx.type}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"status-cell\">\r\n                    {tx.type === 'TRANSFER' && (\r\n                      <span className=\"badge badge-non-taxable\" title=\"Non-taxable transfer\">\r\n                        üîÑ Non-Taxable\r\n                      </span>\r\n                    )}\r\n                    {suspiciousMap[tx.lineNumber || tx.originalLineNumber] && (\r\n                      <span \r\n                        className=\"badge badge-warning\" \r\n                        title={suspiciousMap[tx.lineNumber || tx.originalLineNumber].issues.map(i => i.description).join(', ')}\r\n                      >\r\n                        ‚ö†Ô∏è Flagged\r\n                      </span>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"currency-cell\">{tx.currency}</td>\r\n                  <td className=\"amount-cell\">{formatCrypto(tx.amount)}</td>\r\n                  <td className=\"proceeds-cell\">\r\n                    {tx.proceeds !== null && tx.proceeds !== undefined \r\n                      ? formatCurrency(tx.proceeds) \r\n                      : '-'}\r\n                  </td>\r\n                  <td className=\"cost-cell\">\r\n                    {tx.costBase !== null && tx.costBase !== undefined \r\n                      ? formatCurrency(tx.costBase) \r\n                      : '-'}\r\n                  </td>\r\n                  <td className={`gain-cell ${\r\n                    tx.capitalGain > 0 ? 'positive' : \r\n                    tx.capitalGain < 0 ? 'negative' : ''\r\n                  }`}>\r\n                    {tx.capitalGain !== null && tx.capitalGain !== undefined \r\n                      ? formatCurrency(tx.capitalGain) \r\n                      : '-'}\r\n                  </td>\r\n                  <td className=\"tax-year-cell\">{tx.taxYear || '-'}</td>\r\n                </tr>\r\n\r\n                {expandedRows.has(index) && (\r\n                  <tr className=\"expanded-detail-row\">\r\n                    <td colSpan=\"10\">\r\n                      <div className=\"expanded-content\">\r\n                        <div className=\"detail-sections\">\r\n                          {/* Basic Details */}\r\n                          <div className=\"detail-section\">\r\n                            <h4>Transaction Details</h4>\r\n                            <div className=\"detail-grid\">\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Line Number:</span>\r\n                                <span className=\"detail-value\">{tx.lineNumber || '-'}</span>\r\n                              </div>\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Wallet:</span>\r\n                                <span className=\"detail-value\">{tx.wallet || 'Default'}</span>\r\n                              </div>\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Fee:</span>\r\n                                <span className=\"detail-value\">{formatCurrency(tx.fee || 0)}</span>\r\n                              </div>\r\n                              {tx.totalCost && (\r\n                                <div className=\"detail-item\">\r\n                                  <span className=\"detail-label\">Total Cost:</span>\r\n                                  <span className=\"detail-value\">{formatCurrency(tx.totalCost)}</span>\r\n                                </div>\r\n                              )}\r\n                              {tx.costPerUnit && (\r\n                                <div className=\"detail-item\">\r\n                                  <span className=\"detail-label\">Cost Per Unit:</span>\r\n                                  <span className=\"detail-value\">{formatCurrency(tx.costPerUnit)}</span>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* FIFO Lots Consumed (for SELL/TRADE) */}\r\n                          {tx.lotsConsumed && tx.lotsConsumed.length > 0 && (\r\n                            <div className=\"detail-section fifo-section\">\r\n                              <h4>FIFO Lots Consumed</h4>\r\n                              <div className=\"fifo-table-wrapper\">\r\n                                <table className=\"fifo-table\">\r\n                                  <thead>\r\n                                    <tr>\r\n                                      <th>Acquired Date</th>\r\n                                      <th>Amount Used</th>\r\n                                      <th>Cost Per Unit</th>\r\n                                      <th>Cost Base</th>\r\n                                      <th>Age (Days)</th>\r\n                                      <th>Wallet</th>\r\n                                    </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {tx.lotsConsumed.map((lot, idx) => (\r\n                                      <tr key={idx} className=\"fifo-row\">\r\n                                        <td>{formatDate(lot.purchaseDate)}</td>\r\n                                        <td>{formatCrypto(lot.amountConsumed)}</td>\r\n                                        <td>{formatCurrency(lot.costPerUnit)}</td>\r\n                                        <td>{formatCurrency(lot.costBase)}</td>\r\n                                        <td>{lot.ageInDays || '-'}</td>\r\n                                        <td>{lot.wallet || '-'}</td>\r\n                                      </tr>\r\n                                    ))}\r\n                                  </tbody>\r\n                                  <tfoot>\r\n                                    <tr className=\"fifo-total\">\r\n                                      <td colSpan=\"3\"><strong>Total:</strong></td>\r\n                                      <td>\r\n                                        <strong>\r\n                                          {formatCurrency(\r\n                                            tx.lotsConsumed.reduce((sum, lot) => sum + lot.costBase, 0)\r\n                                          )}\r\n                                        </strong>\r\n                                      </td>\r\n                                      <td colSpan=\"2\"></td>\r\n                                    </tr>\r\n                                  </tfoot>\r\n                                </table>\r\n                              </div>\r\n                              <div className=\"fifo-explanation\">\r\n                                <p>\r\n                                  <strong>FIFO Method:</strong> The oldest lots (First In) are consumed first (First Out) \r\n                                  to calculate the cost base for this disposal.\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Capital Gain Calculation (for SELL/TRADE) */}\r\n                          {tx.capitalGain !== null && tx.capitalGain !== undefined && (\r\n                            <div className=\"detail-section calculation-section\">\r\n                              <h4>Capital Gain Calculation</h4>\r\n                              <div className=\"calculation-breakdown\">\r\n                                <div className=\"calc-row\">\r\n                                  <span className=\"calc-label\">Proceeds (after fees):</span>\r\n                                  <span className=\"calc-value\">{formatCurrency(tx.proceeds)}</span>\r\n                                </div>\r\n                                <div className=\"calc-row\">\r\n                                  <span className=\"calc-label\">Cost Base (FIFO):</span>\r\n                                  <span className=\"calc-value\">- {formatCurrency(tx.costBase)}</span>\r\n                                </div>\r\n                                <div className=\"calc-row calc-total\">\r\n                                  <span className=\"calc-label\"><strong>Capital Gain/Loss:</strong></span>\r\n                                  <span className={`calc-value ${tx.capitalGain >= 0 ? 'positive' : 'negative'}`}>\r\n                                    <strong>{formatCurrency(tx.capitalGain)}</strong>\r\n                                  </span>\r\n                                </div>\r\n                                <div className=\"calc-row calc-taxable\">\r\n                                  <span className=\"calc-label\">Taxable (40% inclusion):</span>\r\n                                  <span className=\"calc-value\">\r\n                                    {formatCurrency(tx.capitalGain >= 0 ? tx.capitalGain * 0.4 : 0)}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Suspicious Transaction Warnings */}\r\n                          {suspiciousMap[tx.lineNumber || tx.originalLineNumber] && (\r\n                            <div className=\"detail-section warning-section\">\r\n                              <h4>‚ö†Ô∏è Transaction Flagged for Review</h4>\r\n                              <div className=\"warning-list\">\r\n                                {suspiciousMap[tx.lineNumber || tx.originalLineNumber].issues.map((issue, idx) => (\r\n                                  <div key={idx} className=\"warning-item\">\r\n                                    <div className=\"warning-header\">\r\n                                      <span className=\"warning-category\">{issue.category}</span>\r\n                                      <span className={`warning-severity ${issue.severity.toLowerCase()}`}>\r\n                                        {issue.severity}\r\n                                      </span>\r\n                                    </div>\r\n                                    <p className=\"warning-description\">{issue.description}</p>\r\n                                    {issue.recommendation && (\r\n                                      <p className=\"warning-recommendation\">\r\n                                        <strong>Recommendation:</strong> {issue.recommendation}\r\n                                      </p>\r\n                                    )}\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Transfer Information */}\r\n                          {tx.type === 'TRANSFER' && (\r\n                            <div className=\"detail-section transfer-section\">\r\n                              <h4>üîÑ Transfer Information</h4>\r\n                              <div className=\"transfer-info\">\r\n                                <div className=\"info-box non-taxable\">\r\n                                  <div className=\"info-icon\">‚úì</div>\r\n                                  <div className=\"info-content\">\r\n                                    <strong>Non-Taxable Event</strong>\r\n                                    <p>This transfer does not trigger a capital gains tax event. The cost basis is preserved when moving assets between wallets.</p>\r\n                                  </div>\r\n                                </div>\r\n                                {tx.wallet && tx.wallet.includes('->') && (\r\n                                  <div className=\"transfer-flow\">\r\n                                    <span className=\"wallet-label\">From:</span>\r\n                                    <span className=\"wallet-name\">{tx.wallet.split('->')[0]}</span>\r\n                                    <span className=\"arrow\">‚Üí</span>\r\n                                    <span className=\"wallet-label\">To:</span>\r\n                                    <span className=\"wallet-name\">{tx.wallet.split('->')[1]}</span>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionTableEnhanced;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}