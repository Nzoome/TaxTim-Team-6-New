{"ast":null,"code":"import _objectSpread from\"C:/Users/Baloyi PA/Desktop/TaxTim-Team-6-New/TaxTim-Team-6-New/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./TransactionTableEnhanced.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionTableEnhanced=_ref=>{let{transactions}=_ref;const[expandedRows,setExpandedRows]=useState(new Set());const[sortConfig,setSortConfig]=useState({key:'date',direction:'desc'});if(!transactions||transactions.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"no-transactions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No transactions to display with current filters.\"})});}const formatCurrency=amount=>{if(amount===null||amount===undefined)return'-';return new Intl.NumberFormat('en-ZA',{style:'currency',currency:'ZAR',minimumFractionDigits:2,maximumFractionDigits:2}).format(amount);};const formatCrypto=function(amount){let decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:8;if(amount===null||amount===undefined)return'-';return parseFloat(amount).toFixed(decimals).replace(/\\.?0+$/,'');};const formatDate=dateString=>{if(!dateString)return'-';const date=new Date(dateString);return date.toLocaleDateString('en-ZA',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const toggleRow=index=>{const newExpanded=new Set(expandedRows);if(newExpanded.has(index)){newExpanded.delete(index);}else{newExpanded.add(index);}setExpandedRows(newExpanded);};const toggleExpandAll=()=>{if(expandedRows.size>0){setExpandedRows(new Set());}else{setExpandedRows(new Set(transactions.map((_,idx)=>idx)));}};const handleSort=key=>{let direction='asc';if(sortConfig.key===key&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key,direction});};const sortedTransactions=[...transactions].sort((a,b)=>{const aVal=a[sortConfig.key];const bVal=b[sortConfig.key];if(aVal===bVal)return 0;const comparison=aVal<bVal?-1:1;return sortConfig.direction==='asc'?comparison:-comparison;});// Calculate cumulative totals for each transaction\nconst transactionsWithCumulative=sortedTransactions.map((tx,index)=>{// Calculate cumulative values up to this transaction\nlet cumulativeProceeds=0;let cumulativeCostBase=0;let cumulativeGainLoss=0;for(let i=0;i<=index;i++){const t=sortedTransactions[i];const txType=(t.type||'').toUpperCase();if(txType==='SELL'||txType==='TRADE'){cumulativeProceeds+=t.proceeds||0;cumulativeCostBase+=t.costBase||0;cumulativeGainLoss+=t.capitalGain||0;}}return _objectSpread(_objectSpread({},tx),{},{cumulativeProceeds,cumulativeCostBase,cumulativeGainLoss});});const getTypeBadgeClass=type=>{switch(type===null||type===void 0?void 0:type.toUpperCase()){case'BUY':return'badge-buy';case'SELL':return'badge-sell';case'TRADE':case'TRADE_SELL':case'TRADE_BUY':return'badge-trade';default:return'';}};const getSortIcon=key=>{if(sortConfig.key!==key)return'â‡…';return sortConfig.direction==='asc'?'â†‘':'â†“';};return/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-table-enhanced\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transaction Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-sm\",onClick:toggleExpandAll,children:expandedRows.size>0?'â¬† Collapse All':'â¬‡ Expand All'}),/*#__PURE__*/_jsxs(\"span\",{className:\"transaction-count\",children:[transactions.length,\" transactions\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"transaction-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"expand-header\"}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('date'),children:[\"Date \",getSortIcon('date')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('type'),children:[\"Type \",getSortIcon('type')]}),/*#__PURE__*/_jsx(\"th\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('proceeds'),children:[\"Proceeds \",getSortIcon('proceeds')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('costBase'),children:[\"Cost Base \",getSortIcon('costBase')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('capitalGain'),children:[\"Gain/Loss \",getSortIcon('capitalGain')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('taxYear'),children:[\"Tax Year \",getSortIcon('taxYear')]})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactionsWithCumulative.map((tx,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"transaction-row \".concat(expandedRows.has(index)?'expanded':''),onClick:()=>toggleRow(index),children:[/*#__PURE__*/_jsx(\"td\",{className:\"expand-cell\",children:/*#__PURE__*/_jsx(\"button\",{className:\"expand-btn\",children:expandedRows.has(index)?'â–¼':'â–¶'})}),/*#__PURE__*/_jsx(\"td\",{className:\"date-cell\",children:formatDate(tx.date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getTypeBadgeClass(tx.type)),children:tx.type})}),/*#__PURE__*/_jsx(\"td\",{className:\"currency-cell\",children:tx.currency}),/*#__PURE__*/_jsx(\"td\",{className:\"amount-cell\",children:formatCrypto(tx.amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"proceeds-cell\",children:(()=>{const txType=(tx.type||'').toUpperCase();if(txType==='BUY'&&tx.totalCost>0){return formatCurrency(tx.totalCost);}return tx.proceeds>0?formatCurrency(tx.proceeds):'-';})()}),/*#__PURE__*/_jsx(\"td\",{className:\"cost-cell\",children:(()=>{const txType=(tx.type||'').toUpperCase();if(txType==='BUY'&&tx.costPerUnit>0){return formatCurrency(tx.costPerUnit);}return tx.costBase>0?formatCurrency(tx.costBase):'-';})()}),/*#__PURE__*/_jsx(\"td\",{className:\"gain-cell \".concat(tx.capitalGain>0?'positive':tx.capitalGain<0?'negative':''),children:(()=>{const txType=(tx.type||'').toUpperCase();if(txType==='BUY'){return'-';}return tx.capitalGain!==0?formatCurrency(tx.capitalGain):'-';})()}),/*#__PURE__*/_jsx(\"td\",{className:\"tax-year-cell\",children:tx.taxYear||'-'})]}),expandedRows.has(index)&&/*#__PURE__*/_jsx(\"tr\",{className:\"expanded-detail-row\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"expanded-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"detail-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Transaction Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Line Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:tx.lineNumber||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Wallet:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:tx.wallet||'Default'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Fee:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.fee||0)})]}),tx.totalCost&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Total Cost:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.totalCost)})]}),tx.costPerUnit&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Cost Per Unit:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatCurrency(tx.costPerUnit)})]})]})]}),tx.lotsConsumed&&tx.lotsConsumed.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section fifo-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"FIFO Lots Consumed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fifo-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"fifo-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Acquired Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Used\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost Per Unit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost Base\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age (Days)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wallet\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tx.lotsConsumed.map((lot,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"fifo-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(lot.purchaseDate)}),/*#__PURE__*/_jsx(\"td\",{children:formatCrypto(lot.amountConsumed)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(lot.costPerUnit)}),/*#__PURE__*/_jsx(\"td\",{children:formatCurrency(lot.costBase)}),/*#__PURE__*/_jsx(\"td\",{children:lot.ageInDays||'-'}),/*#__PURE__*/_jsx(\"td\",{children:lot.wallet||'-'})]},idx))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"fifo-total\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(tx.lotsConsumed.reduce((sum,lot)=>sum+lot.costBase,0))})}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"fifo-explanation\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FIFO Method:\"}),\" The oldest lots (First In) are consumed first (First Out) to calculate the cost base for this disposal.\"]})})]}),tx.capitalGain!==null&&tx.capitalGain!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section calculation-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Capital Gain Calculation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calculation-breakdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Proceeds (after fees):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value\",children:formatCurrency(tx.proceeds)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Cost Base (FIFO):\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"calc-value\",children:[\"- \",formatCurrency(tx.costBase)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row calc-total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Capital Gain/Loss:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value \".concat(tx.capitalGain>=0?'positive':'negative'),children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(tx.capitalGain)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row calc-taxable\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"calc-label\",children:\"Taxable (40% inclusion):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"calc-value\",children:formatCurrency(tx.capitalGain>=0?tx.capitalGain*0.4:0)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section cumulative-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCA Running Totals (Up to This Transaction)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cumulative-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cumulative-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-label\",children:\"Total Proceeds:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-value\",children:formatCurrency(tx.cumulativeProceeds)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cumulative-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-label\",children:\"Total Cost Base:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-value\",children:formatCurrency(tx.cumulativeCostBase)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cumulative-item cumulative-highlight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-label\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Net Gain/Loss:\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-value \".concat(tx.cumulativeGainLoss>=0?'positive':'negative'),children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(tx.cumulativeGainLoss)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cumulative-item cumulative-tax\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-label\",children:\"Potential Tax (40%):\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cumulative-value\",children:formatCurrency(tx.cumulativeGainLoss>0?tx.cumulativeGainLoss*0.4:0)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cumulative-note\",children:/*#__PURE__*/_jsx(\"small\",{children:\"\\uD83D\\uDCA1 This shows your cumulative position from the beginning of your transaction history up to and including this transaction.\"})})]})]})})})})]},index))})]})})]});};export default TransactionTableEnhanced;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","TransactionTableEnhanced","_ref","transactions","expandedRows","setExpandedRows","Set","sortConfig","setSortConfig","key","direction","length","className","children","formatCurrency","amount","undefined","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatCrypto","decimals","arguments","parseFloat","toFixed","replace","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","toggleRow","index","newExpanded","has","delete","add","toggleExpandAll","size","map","_","idx","handleSort","sortedTransactions","sort","a","b","aVal","bVal","comparison","transactionsWithCumulative","tx","cumulativeProceeds","cumulativeCostBase","cumulativeGainLoss","i","t","txType","type","toUpperCase","proceeds","costBase","capitalGain","_objectSpread","getTypeBadgeClass","getSortIcon","onClick","Fragment","concat","totalCost","costPerUnit","taxYear","colSpan","lineNumber","wallet","fee","lotsConsumed","lot","purchaseDate","amountConsumed","ageInDays","reduce","sum"],"sources":["C:/Users/Baloyi PA/Desktop/TaxTim-Team-6-New/TaxTim-Team-6-New/frontend/src/components/TransactionTableEnhanced.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './TransactionTableEnhanced.css';\r\n\r\nconst TransactionTableEnhanced = ({ transactions }) => {\r\n  const [expandedRows, setExpandedRows] = useState(new Set());\r\n  const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });\r\n\r\n  if (!transactions || transactions.length === 0) {\r\n    return (\r\n      <div className=\"no-transactions\">\r\n        <p>No transactions to display with current filters.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (amount === null || amount === undefined) return '-';\r\n    return new Intl.NumberFormat('en-ZA', {\r\n      style: 'currency',\r\n      currency: 'ZAR',\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatCrypto = (amount, decimals = 8) => {\r\n    if (amount === null || amount === undefined) return '-';\r\n    return parseFloat(amount).toFixed(decimals).replace(/\\.?0+$/, '');\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '-';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-ZA', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const toggleRow = (index) => {\r\n    const newExpanded = new Set(expandedRows);\r\n    if (newExpanded.has(index)) {\r\n      newExpanded.delete(index);\r\n    } else {\r\n      newExpanded.add(index);\r\n    }\r\n    setExpandedRows(newExpanded);\r\n  };\r\n\r\n  const toggleExpandAll = () => {\r\n    if (expandedRows.size > 0) {\r\n      setExpandedRows(new Set());\r\n    } else {\r\n      setExpandedRows(new Set(transactions.map((_, idx) => idx)));\r\n    }\r\n  };\r\n\r\n  const handleSort = (key) => {\r\n    let direction = 'asc';\r\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const sortedTransactions = [...transactions].sort((a, b) => {\r\n    const aVal = a[sortConfig.key];\r\n    const bVal = b[sortConfig.key];\r\n    \r\n    if (aVal === bVal) return 0;\r\n    \r\n    const comparison = aVal < bVal ? -1 : 1;\r\n    return sortConfig.direction === 'asc' ? comparison : -comparison;\r\n  });\r\n\r\n  // Calculate cumulative totals for each transaction\r\n  const transactionsWithCumulative = sortedTransactions.map((tx, index) => {\r\n    // Calculate cumulative values up to this transaction\r\n    let cumulativeProceeds = 0;\r\n    let cumulativeCostBase = 0;\r\n    let cumulativeGainLoss = 0;\r\n    \r\n    for (let i = 0; i <= index; i++) {\r\n      const t = sortedTransactions[i];\r\n      const txType = (t.type || '').toUpperCase();\r\n      if (txType === 'SELL' || txType === 'TRADE') {\r\n        cumulativeProceeds += t.proceeds || 0;\r\n        cumulativeCostBase += t.costBase || 0;\r\n        cumulativeGainLoss += t.capitalGain || 0;\r\n      }\r\n    }\r\n    \r\n    return {\r\n      ...tx,\r\n      cumulativeProceeds,\r\n      cumulativeCostBase,\r\n      cumulativeGainLoss\r\n    };\r\n  });\r\n\r\n  const getTypeBadgeClass = (type) => {\r\n    switch (type?.toUpperCase()) {\r\n      case 'BUY':\r\n        return 'badge-buy';\r\n      case 'SELL':\r\n        return 'badge-sell';\r\n      case 'TRADE':\r\n      case 'TRADE_SELL':\r\n      case 'TRADE_BUY':\r\n        return 'badge-trade';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getSortIcon = (key) => {\r\n    if (sortConfig.key !== key) return 'â‡…';\r\n    return sortConfig.direction === 'asc' ? 'â†‘' : 'â†“';\r\n  };\r\n\r\n  return (\r\n    <div className=\"transaction-table-enhanced\">\r\n      <div className=\"table-header-section\">\r\n        <h2>Transaction Details</h2>\r\n        <div className=\"table-actions\">\r\n          <button className=\"btn btn-secondary btn-sm\" onClick={toggleExpandAll}>\r\n            {expandedRows.size > 0 ? 'â¬† Collapse All' : 'â¬‡ Expand All'}\r\n          </button>\r\n          <span className=\"transaction-count\">{transactions.length} transactions</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"table-wrapper\">\r\n        <table className=\"transaction-table\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"expand-header\"></th>\r\n              <th className=\"sortable\" onClick={() => handleSort('date')}>\r\n                Date {getSortIcon('date')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('type')}>\r\n                Type {getSortIcon('type')}\r\n              </th>\r\n              <th>Currency</th>\r\n              <th>Amount</th>\r\n              <th className=\"sortable\" onClick={() => handleSort('proceeds')}>\r\n                Proceeds {getSortIcon('proceeds')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('costBase')}>\r\n                Cost Base {getSortIcon('costBase')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('capitalGain')}>\r\n                Gain/Loss {getSortIcon('capitalGain')}\r\n              </th>\r\n              <th className=\"sortable\" onClick={() => handleSort('taxYear')}>\r\n                Tax Year {getSortIcon('taxYear')}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {transactionsWithCumulative.map((tx, index) => (\r\n              <React.Fragment key={index}>\r\n                <tr \r\n                  className={`transaction-row ${expandedRows.has(index) ? 'expanded' : ''}`}\r\n                  onClick={() => toggleRow(index)}\r\n                >\r\n                  <td className=\"expand-cell\">\r\n                    <button className=\"expand-btn\">\r\n                      {expandedRows.has(index) ? 'â–¼' : 'â–¶'}\r\n                    </button>\r\n                  </td>\r\n                  <td className=\"date-cell\">{formatDate(tx.date)}</td>\r\n                  <td>\r\n                    <span className={`badge ${getTypeBadgeClass(tx.type)}`}>\r\n                      {tx.type}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"currency-cell\">{tx.currency}</td>\r\n                  <td className=\"amount-cell\">{formatCrypto(tx.amount)}</td>\r\n                  <td className=\"proceeds-cell\">\r\n                    {(() => {\r\n                      const txType = (tx.type || '').toUpperCase();\r\n                      if (txType === 'BUY' && tx.totalCost > 0) {\r\n                        return formatCurrency(tx.totalCost);\r\n                      }\r\n                      return tx.proceeds > 0 ? formatCurrency(tx.proceeds) : '-';\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"cost-cell\">\r\n                    {(() => {\r\n                      const txType = (tx.type || '').toUpperCase();\r\n                      if (txType === 'BUY' && tx.costPerUnit > 0) {\r\n                        return formatCurrency(tx.costPerUnit);\r\n                      }\r\n                      return tx.costBase > 0 ? formatCurrency(tx.costBase) : '-';\r\n                    })()}\r\n                  </td>\r\n                  <td className={`gain-cell ${\r\n                    tx.capitalGain > 0 ? 'positive' : \r\n                    tx.capitalGain < 0 ? 'negative' : ''\r\n                  }`}>\r\n                    {(() => {\r\n                      const txType = (tx.type || '').toUpperCase();\r\n                      if (txType === 'BUY') {\r\n                        return '-';\r\n                      }\r\n                      return tx.capitalGain !== 0 ? formatCurrency(tx.capitalGain) : '-';\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"tax-year-cell\">{tx.taxYear || '-'}</td>\r\n                </tr>\r\n\r\n                {expandedRows.has(index) && (\r\n                  <tr className=\"expanded-detail-row\">\r\n                    <td colSpan=\"9\">\r\n                      <div className=\"expanded-content\">\r\n                        <div className=\"detail-sections\">\r\n                          {/* Basic Details */}\r\n                          <div className=\"detail-section\">\r\n                            <h4>Transaction Details</h4>\r\n                            <div className=\"detail-grid\">\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Line Number:</span>\r\n                                <span className=\"detail-value\">{tx.lineNumber || '-'}</span>\r\n                              </div>\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Wallet:</span>\r\n                                <span className=\"detail-value\">{tx.wallet || 'Default'}</span>\r\n                              </div>\r\n                              <div className=\"detail-item\">\r\n                                <span className=\"detail-label\">Fee:</span>\r\n                                <span className=\"detail-value\">{formatCurrency(tx.fee || 0)}</span>\r\n                              </div>\r\n                              {tx.totalCost && (\r\n                                <div className=\"detail-item\">\r\n                                  <span className=\"detail-label\">Total Cost:</span>\r\n                                  <span className=\"detail-value\">{formatCurrency(tx.totalCost)}</span>\r\n                                </div>\r\n                              )}\r\n                              {tx.costPerUnit && (\r\n                                <div className=\"detail-item\">\r\n                                  <span className=\"detail-label\">Cost Per Unit:</span>\r\n                                  <span className=\"detail-value\">{formatCurrency(tx.costPerUnit)}</span>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* FIFO Lots Consumed (for SELL/TRADE) */}\r\n                          {tx.lotsConsumed && tx.lotsConsumed.length > 0 && (\r\n                            <div className=\"detail-section fifo-section\">\r\n                              <h4>FIFO Lots Consumed</h4>\r\n                              <div className=\"fifo-table-wrapper\">\r\n                                <table className=\"fifo-table\">\r\n                                  <thead>\r\n                                    <tr>\r\n                                      <th>Acquired Date</th>\r\n                                      <th>Amount Used</th>\r\n                                      <th>Cost Per Unit</th>\r\n                                      <th>Cost Base</th>\r\n                                      <th>Age (Days)</th>\r\n                                      <th>Wallet</th>\r\n                                    </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {tx.lotsConsumed.map((lot, idx) => (\r\n                                      <tr key={idx} className=\"fifo-row\">\r\n                                        <td>{formatDate(lot.purchaseDate)}</td>\r\n                                        <td>{formatCrypto(lot.amountConsumed)}</td>\r\n                                        <td>{formatCurrency(lot.costPerUnit)}</td>\r\n                                        <td>{formatCurrency(lot.costBase)}</td>\r\n                                        <td>{lot.ageInDays || '-'}</td>\r\n                                        <td>{lot.wallet || '-'}</td>\r\n                                      </tr>\r\n                                    ))}\r\n                                  </tbody>\r\n                                  <tfoot>\r\n                                    <tr className=\"fifo-total\">\r\n                                      <td colSpan=\"3\"><strong>Total:</strong></td>\r\n                                      <td>\r\n                                        <strong>\r\n                                          {formatCurrency(\r\n                                            tx.lotsConsumed.reduce((sum, lot) => sum + lot.costBase, 0)\r\n                                          )}\r\n                                        </strong>\r\n                                      </td>\r\n                                      <td colSpan=\"2\"></td>\r\n                                    </tr>\r\n                                  </tfoot>\r\n                                </table>\r\n                              </div>\r\n                              <div className=\"fifo-explanation\">\r\n                                <p>\r\n                                  <strong>FIFO Method:</strong> The oldest lots (First In) are consumed first (First Out) \r\n                                  to calculate the cost base for this disposal.\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Capital Gain Calculation (for SELL/TRADE) */}\r\n                          {tx.capitalGain !== null && tx.capitalGain !== undefined && (\r\n                            <div className=\"detail-section calculation-section\">\r\n                              <h4>Capital Gain Calculation</h4>\r\n                              <div className=\"calculation-breakdown\">\r\n                                <div className=\"calc-row\">\r\n                                  <span className=\"calc-label\">Proceeds (after fees):</span>\r\n                                  <span className=\"calc-value\">{formatCurrency(tx.proceeds)}</span>\r\n                                </div>\r\n                                <div className=\"calc-row\">\r\n                                  <span className=\"calc-label\">Cost Base (FIFO):</span>\r\n                                  <span className=\"calc-value\">- {formatCurrency(tx.costBase)}</span>\r\n                                </div>\r\n                                <div className=\"calc-row calc-total\">\r\n                                  <span className=\"calc-label\"><strong>Capital Gain/Loss:</strong></span>\r\n                                  <span className={`calc-value ${tx.capitalGain >= 0 ? 'positive' : 'negative'}`}>\r\n                                    <strong>{formatCurrency(tx.capitalGain)}</strong>\r\n                                  </span>\r\n                                </div>\r\n                                <div className=\"calc-row calc-taxable\">\r\n                                  <span className=\"calc-label\">Taxable (40% inclusion):</span>\r\n                                  <span className=\"calc-value\">\r\n                                    {formatCurrency(tx.capitalGain >= 0 ? tx.capitalGain * 0.4 : 0)}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Cumulative Summary */}\r\n                          <div className=\"detail-section cumulative-section\">\r\n                            <h4>ðŸ“Š Running Totals (Up to This Transaction)</h4>\r\n                            <div className=\"cumulative-grid\">\r\n                              <div className=\"cumulative-item\">\r\n                                <span className=\"cumulative-label\">Total Proceeds:</span>\r\n                                <span className=\"cumulative-value\">{formatCurrency(tx.cumulativeProceeds)}</span>\r\n                              </div>\r\n                              <div className=\"cumulative-item\">\r\n                                <span className=\"cumulative-label\">Total Cost Base:</span>\r\n                                <span className=\"cumulative-value\">{formatCurrency(tx.cumulativeCostBase)}</span>\r\n                              </div>\r\n                              <div className=\"cumulative-item cumulative-highlight\">\r\n                                <span className=\"cumulative-label\"><strong>Net Gain/Loss:</strong></span>\r\n                                <span className={`cumulative-value ${tx.cumulativeGainLoss >= 0 ? 'positive' : 'negative'}`}>\r\n                                  <strong>{formatCurrency(tx.cumulativeGainLoss)}</strong>\r\n                                </span>\r\n                              </div>\r\n                              <div className=\"cumulative-item cumulative-tax\">\r\n                                <span className=\"cumulative-label\">Potential Tax (40%):</span>\r\n                                <span className=\"cumulative-value\">\r\n                                  {formatCurrency(tx.cumulativeGainLoss > 0 ? tx.cumulativeGainLoss * 0.4 : 0)}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"cumulative-note\">\r\n                              <small>ðŸ’¡ This shows your cumulative position from the beginning of your transaction history up to and including this transaction.</small>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionTableEnhanced;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}