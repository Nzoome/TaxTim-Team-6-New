{"ast":null,"code":"import _objectSpread from\"C:/Users/Baloyi PA/Desktop/TaxTim-Team-6-New/TaxTim-Team-6-New/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{useNavigate}from'react-router-dom';import'./Dashboard.css';import SummaryCards from'./SummaryCards';import TransactionTableEnhanced from'./TransactionTableEnhanced';import FIFOExplorer from'./FIFOExplorer';import Charts from'./Charts';import FilterPanel from'./FilterPanel';import ExportButtons from'./ExportButtons';import SuspiciousTransactionSummary from'./SuspiciousTransactionSummary';import TaxStatusSummary from'./TaxStatusSummary';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const navigate=useNavigate();const[data,setData]=useState(null);const[selectedTaxYear,setSelectedTaxYear]=useState('all');const[filters,setFilters]=useState({asset:'all',type:'all',taxYear:'all'});const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Load the latest transaction data from the backend\nloadTransactionData();},[]);const loadTransactionData=async()=>{try{const response=await fetch('http://localhost:8000/transactions.php');const result=await response.json();if(result.success){// Enrich transactions with FIFO breakdown data\nif(result.data.transactions&&result.data.analytics&&result.data.analytics.fifo_breakdowns){const enrichedTransactions=result.data.transactions.map((tx,index)=>{const breakdown=result.data.analytics.fifo_breakdowns[index];// Determine the primary currency based on transaction type\nlet primaryCurrency;const txType=(tx.type||'').toUpperCase();if(txType==='BUY'){// For BUY: primary currency is what you're buying (toCurrency)\nprimaryCurrency=(breakdown===null||breakdown===void 0?void 0:breakdown.currency)||tx.toCurrency;}else if(txType==='SELL'){// For SELL: primary currency is what you're selling (fromCurrency)\nprimaryCurrency=(breakdown===null||breakdown===void 0?void 0:breakdown.currency)||tx.fromCurrency;}else if(txType==='TRADE'){// For TRADE: primary currency is what you're trading away (fromCurrency)\n// This is the asset with the capital gain/loss event\nprimaryCurrency=(breakdown===null||breakdown===void 0?void 0:breakdown.fromCurrency)||tx.fromCurrency;}else{// Fallback\nprimaryCurrency=(breakdown===null||breakdown===void 0?void 0:breakdown.currency)||tx.toCurrency||tx.fromCurrency;}return _objectSpread(_objectSpread({},tx),{},{currency:primaryCurrency,capitalGain:(breakdown===null||breakdown===void 0?void 0:breakdown.capitalGain)||0,proceeds:(breakdown===null||breakdown===void 0?void 0:breakdown.proceeds)||0,costBase:(breakdown===null||breakdown===void 0?void 0:breakdown.costBase)||0,taxYear:(breakdown===null||breakdown===void 0?void 0:breakdown.taxYear)||null,lotsConsumed:(breakdown===null||breakdown===void 0?void 0:breakdown.lotsConsumed)||null});});result.data.transactions=enrichedTransactions;}setData(result.data);setIsLoading(false);}else{console.error('Failed to load data');setIsLoading(false);}}catch(error){console.error('Error loading data:',error);setIsLoading(false);}};// Filter transactions based on selected filters\nconst filteredTransactions=useMemo(()=>{if(!data||!data.transactions)return[];return data.transactions.filter(tx=>{// Filter by asset - use the enriched currency field which represents the primary asset\nif(filters.asset!=='all'){// The tx.currency field has been enriched to represent the primary asset\n// based on transaction type (see enrichment logic above)\nif(tx.currency!==filters.asset){return false;}}// Filter by type - only apply if a specific type is selected (not 'all')\nif(filters.type!=='all'){const txType=(tx.type||'').toUpperCase();const filterType=(filters.type||'').toUpperCase();if(txType!==filterType)return false;}// Filter by tax year - only apply if a specific year is selected (not 'all')\nif(filters.taxYear!=='all'&&tx.taxYear!==filters.taxYear){return false;}return true;});},[data,filters]);// Helper function to calculate taxable gain with annual exclusion\nconst calculateTaxableGain=netGain=>{if(netGain<=0)return{taxable:0,exclusionApplied:0,exclusionUsed:false};const ANNUAL_EXCLUSION=40000;const INCLUSION_RATE=0.4;if(netGain>ANNUAL_EXCLUSION){const afterExclusion=netGain-ANNUAL_EXCLUSION;return{taxable:afterExclusion*INCLUSION_RATE,exclusionApplied:ANNUAL_EXCLUSION,exclusionUsed:true};}else{return{taxable:0,exclusionApplied:netGain,exclusionUsed:true};}};// Calculate filtered summary\nconst filteredSummary=useMemo(()=>{// Use analytics data from backend if available\nif(data&&data.analytics){const taxCalc=calculateTaxableGain(data.analytics.capital_gain||0);return{totalProceeds:data.analytics.total_proceeds||0,totalCostBase:data.analytics.total_cost_base||0,totalCapitalGain:data.analytics.total_capital_gain||0,totalCapitalLoss:data.analytics.total_capital_loss||0,netCapitalGain:data.analytics.capital_gain||0,taxableCapitalGain:taxCalc.taxable,annualExclusionApplied:taxCalc.exclusionApplied,annualExclusionUsed:taxCalc.exclusionUsed,transactionsProcessed:data.analytics.transactions_processed||0};}if(!filteredTransactions.length){return{totalProceeds:0,totalCostBase:0,totalCapitalGain:0,totalCapitalLoss:0,netCapitalGain:0,taxableCapitalGain:0,annualExclusionApplied:0,annualExclusionUsed:false,transactionsProcessed:0};}const summary=filteredTransactions.reduce((acc,tx)=>{if(tx.type==='SELL'||tx.type==='TRADE_SELL'){acc.totalProceeds+=tx.proceeds||0;acc.totalCostBase+=tx.costBase||0;const gain=tx.capitalGain||0;if(gain>=0){acc.totalCapitalGain+=gain;}else{acc.totalCapitalLoss+=Math.abs(gain);}acc.netCapitalGain+=gain;}acc.transactionsProcessed++;return acc;},{totalProceeds:0,totalCostBase:0,totalCapitalGain:0,totalCapitalLoss:0,netCapitalGain:0,transactionsProcessed:0});// Calculate taxable capital gain with annual exclusion\nconst taxCalc=calculateTaxableGain(summary.netCapitalGain);summary.taxableCapitalGain=taxCalc.taxable;summary.annualExclusionApplied=taxCalc.exclusionApplied;summary.annualExclusionUsed=taxCalc.exclusionUsed;return summary;},[data,filteredTransactions]);// Extract unique tax years from data\nconst taxYears=useMemo(()=>{if(!data||!data.transactions)return[];const years=new Set();data.transactions.forEach(tx=>{if(tx.taxYear)years.add(tx.taxYear);});return Array.from(years).sort();},[data]);// Extract unique assets\nconst assets=useMemo(()=>{if(!data||!data.transactions)return[];const assetSet=new Set();data.transactions.forEach(tx=>{if(tx.currency)assetSet.add(tx.currency);if(tx.fromCurrency)assetSet.add(tx.fromCurrency);if(tx.toCurrency)assetSet.add(tx.toCurrency);});return Array.from(assetSet).sort();},[data]);const handleFilterChange=newFilters=>{setFilters(newFilters);};const handleBackToUpload=()=>{navigate('/process');};if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading dashboard...\"})]});}if(!data){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-empty\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No Data Available\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please upload a transaction file to view your tax report.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleBackToUpload,children:\"\\uD83D\\uDCC1 Upload Transactions\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:handleBackToUpload,children:\"\\u2190 Upload New File\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCCA Crypto Tax Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"header-subtitle\",children:\"SARS-Ready Capital Gains Report\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(SuspiciousTransactionSummary,{redFlags:data.red_flags||[],summary:data.red_flag_summary||{total_flags:0,critical_count:0,high_count:0,medium_count:0,low_count:0,audit_risk_score:0},auditRiskLevel:data.audit_risk_level||'MINIMAL - No significant issues detected',hasCriticalIssues:data.has_critical_issues||false}),/*#__PURE__*/_jsx(TaxStatusSummary,{taxStatus:data.tax_status||{non_taxable_events:[],taxable_events:[],summary:{total_events:0,non_taxable_count:0,taxable_count:0,buy_count:0,transfer_count:0,sell_count:0,trade_count:0},tax_obligation_exists:false}}),/*#__PURE__*/_jsx(SummaryCards,{summary:filteredSummary,taxYears:taxYears,selectedTaxYear:filters.taxYear,onTaxYearChange:year=>setFilters(_objectSpread(_objectSpread({},filters),{},{taxYear:year}))}),/*#__PURE__*/_jsx(Charts,{transactions:filteredTransactions,summary:filteredSummary}),/*#__PURE__*/_jsx(FilterPanel,{filters:filters,onFilterChange:handleFilterChange,assets:assets,taxYears:taxYears}),/*#__PURE__*/_jsx(TransactionTableEnhanced,{transactions:filteredTransactions}),/*#__PURE__*/_jsx(ExportButtons,{transactions:filteredTransactions,summary:filteredSummary,filters:filters})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useNavigate","SummaryCards","TransactionTableEnhanced","FIFOExplorer","Charts","FilterPanel","ExportButtons","SuspiciousTransactionSummary","TaxStatusSummary","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","data","setData","selectedTaxYear","setSelectedTaxYear","filters","setFilters","asset","type","taxYear","isLoading","setIsLoading","loadTransactionData","response","fetch","result","json","success","transactions","analytics","fifo_breakdowns","enrichedTransactions","map","tx","index","breakdown","primaryCurrency","txType","toUpperCase","currency","toCurrency","fromCurrency","_objectSpread","capitalGain","proceeds","costBase","lotsConsumed","console","error","filteredTransactions","filter","filterType","calculateTaxableGain","netGain","taxable","exclusionApplied","exclusionUsed","ANNUAL_EXCLUSION","INCLUSION_RATE","afterExclusion","filteredSummary","taxCalc","capital_gain","totalProceeds","total_proceeds","totalCostBase","total_cost_base","totalCapitalGain","total_capital_gain","totalCapitalLoss","total_capital_loss","netCapitalGain","taxableCapitalGain","annualExclusionApplied","annualExclusionUsed","transactionsProcessed","transactions_processed","length","summary","reduce","acc","gain","Math","abs","taxYears","years","Set","forEach","add","Array","from","sort","assets","assetSet","handleFilterChange","newFilters","handleBackToUpload","className","children","onClick","redFlags","red_flags","red_flag_summary","total_flags","critical_count","high_count","medium_count","low_count","audit_risk_score","auditRiskLevel","audit_risk_level","hasCriticalIssues","has_critical_issues","taxStatus","tax_status","non_taxable_events","taxable_events","total_events","non_taxable_count","taxable_count","buy_count","transfer_count","sell_count","trade_count","tax_obligation_exists","onTaxYearChange","year","onFilterChange"],"sources":["C:/Users/Baloyi PA/Desktop/TaxTim-Team-6-New/TaxTim-Team-6-New/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Dashboard.css';\r\nimport SummaryCards from './SummaryCards';\r\nimport TransactionTableEnhanced from './TransactionTableEnhanced';\r\nimport FIFOExplorer from './FIFOExplorer';\r\nimport Charts from './Charts';\r\nimport FilterPanel from './FilterPanel';\r\nimport ExportButtons from './ExportButtons';\r\nimport SuspiciousTransactionSummary from './SuspiciousTransactionSummary';\r\nimport TaxStatusSummary from './TaxStatusSummary';\r\n\r\nfunction Dashboard() {\r\n  const navigate = useNavigate();\r\n  const [data, setData] = useState(null);\r\n  const [selectedTaxYear, setSelectedTaxYear] = useState('all');\r\n  const [filters, setFilters] = useState({\r\n    asset: 'all',\r\n    type: 'all',\r\n    taxYear: 'all'\r\n  });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Load the latest transaction data from the backend\r\n    loadTransactionData();\r\n  }, []);\r\n\r\n  const loadTransactionData = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:8000/transactions.php');\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        // Enrich transactions with FIFO breakdown data\r\n        if (result.data.transactions && result.data.analytics && result.data.analytics.fifo_breakdowns) {\r\n          const enrichedTransactions = result.data.transactions.map((tx, index) => {\r\n            const breakdown = result.data.analytics.fifo_breakdowns[index];\r\n            \r\n            // Determine the primary currency based on transaction type\r\n            let primaryCurrency;\r\n            const txType = (tx.type || '').toUpperCase();\r\n            if (txType === 'BUY') {\r\n              // For BUY: primary currency is what you're buying (toCurrency)\r\n              primaryCurrency = breakdown?.currency || tx.toCurrency;\r\n            } else if (txType === 'SELL') {\r\n              // For SELL: primary currency is what you're selling (fromCurrency)\r\n              primaryCurrency = breakdown?.currency || tx.fromCurrency;\r\n            } else if (txType === 'TRADE') {\r\n              // For TRADE: primary currency is what you're trading away (fromCurrency)\r\n              // This is the asset with the capital gain/loss event\r\n              primaryCurrency = breakdown?.fromCurrency || tx.fromCurrency;\r\n            } else {\r\n              // Fallback\r\n              primaryCurrency = breakdown?.currency || tx.toCurrency || tx.fromCurrency;\r\n            }\r\n            \r\n            return {\r\n              ...tx,\r\n              currency: primaryCurrency,\r\n              capitalGain: breakdown?.capitalGain || 0,\r\n              proceeds: breakdown?.proceeds || 0,\r\n              costBase: breakdown?.costBase || 0,\r\n              taxYear: breakdown?.taxYear || null,\r\n              lotsConsumed: breakdown?.lotsConsumed || null\r\n            };\r\n          });\r\n          result.data.transactions = enrichedTransactions;\r\n        }\r\n        \r\n        setData(result.data);\r\n        setIsLoading(false);\r\n      } else {\r\n        console.error('Failed to load data');\r\n        setIsLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter transactions based on selected filters\r\n  const filteredTransactions = useMemo(() => {\r\n    if (!data || !data.transactions) return [];\r\n\r\n    return data.transactions.filter(tx => {\r\n      // Filter by asset - use the enriched currency field which represents the primary asset\r\n      if (filters.asset !== 'all') {\r\n        // The tx.currency field has been enriched to represent the primary asset\r\n        // based on transaction type (see enrichment logic above)\r\n        if (tx.currency !== filters.asset) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Filter by type - only apply if a specific type is selected (not 'all')\r\n      if (filters.type !== 'all') {\r\n        const txType = (tx.type || '').toUpperCase();\r\n        const filterType = (filters.type || '').toUpperCase();\r\n        if (txType !== filterType) return false;\r\n      }\r\n\r\n      // Filter by tax year - only apply if a specific year is selected (not 'all')\r\n      if (filters.taxYear !== 'all' && tx.taxYear !== filters.taxYear) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }, [data, filters]);\r\n\r\n  // Helper function to calculate taxable gain with annual exclusion\r\n  const calculateTaxableGain = (netGain) => {\r\n    if (netGain <= 0) return { taxable: 0, exclusionApplied: 0, exclusionUsed: false };\r\n    \r\n    const ANNUAL_EXCLUSION = 40000;\r\n    const INCLUSION_RATE = 0.4;\r\n    \r\n    if (netGain > ANNUAL_EXCLUSION) {\r\n      const afterExclusion = netGain - ANNUAL_EXCLUSION;\r\n      return {\r\n        taxable: afterExclusion * INCLUSION_RATE,\r\n        exclusionApplied: ANNUAL_EXCLUSION,\r\n        exclusionUsed: true\r\n      };\r\n    } else {\r\n      return {\r\n        taxable: 0,\r\n        exclusionApplied: netGain,\r\n        exclusionUsed: true\r\n      };\r\n    }\r\n  };\r\n\r\n  // Calculate filtered summary\r\n  const filteredSummary = useMemo(() => {\r\n    // Use analytics data from backend if available\r\n    if (data && data.analytics) {\r\n      const taxCalc = calculateTaxableGain(data.analytics.capital_gain || 0);\r\n      return {\r\n        totalProceeds: data.analytics.total_proceeds || 0,\r\n        totalCostBase: data.analytics.total_cost_base || 0,\r\n        totalCapitalGain: data.analytics.total_capital_gain || 0,\r\n        totalCapitalLoss: data.analytics.total_capital_loss || 0,\r\n        netCapitalGain: data.analytics.capital_gain || 0,\r\n        taxableCapitalGain: taxCalc.taxable,\r\n        annualExclusionApplied: taxCalc.exclusionApplied,\r\n        annualExclusionUsed: taxCalc.exclusionUsed,\r\n        transactionsProcessed: data.analytics.transactions_processed || 0\r\n      };\r\n    }\r\n\r\n    if (!filteredTransactions.length) {\r\n      return {\r\n        totalProceeds: 0,\r\n        totalCostBase: 0,\r\n        totalCapitalGain: 0,\r\n        totalCapitalLoss: 0,\r\n        netCapitalGain: 0,\r\n        taxableCapitalGain: 0,\r\n        annualExclusionApplied: 0,\r\n        annualExclusionUsed: false,\r\n        transactionsProcessed: 0\r\n      };\r\n    }\r\n\r\n    const summary = filteredTransactions.reduce((acc, tx) => {\r\n      if (tx.type === 'SELL' || tx.type === 'TRADE_SELL') {\r\n        acc.totalProceeds += tx.proceeds || 0;\r\n        acc.totalCostBase += tx.costBase || 0;\r\n        \r\n        const gain = tx.capitalGain || 0;\r\n        if (gain >= 0) {\r\n          acc.totalCapitalGain += gain;\r\n        } else {\r\n          acc.totalCapitalLoss += Math.abs(gain);\r\n        }\r\n        acc.netCapitalGain += gain;\r\n      }\r\n      acc.transactionsProcessed++;\r\n      return acc;\r\n    }, {\r\n      totalProceeds: 0,\r\n      totalCostBase: 0,\r\n      totalCapitalGain: 0,\r\n      totalCapitalLoss: 0,\r\n      netCapitalGain: 0,\r\n      transactionsProcessed: 0\r\n    });\r\n\r\n    // Calculate taxable capital gain with annual exclusion\r\n    const taxCalc = calculateTaxableGain(summary.netCapitalGain);\r\n    summary.taxableCapitalGain = taxCalc.taxable;\r\n    summary.annualExclusionApplied = taxCalc.exclusionApplied;\r\n    summary.annualExclusionUsed = taxCalc.exclusionUsed;\r\n\r\n    return summary;\r\n  }, [data, filteredTransactions]);\r\n\r\n  // Extract unique tax years from data\r\n  const taxYears = useMemo(() => {\r\n    if (!data || !data.transactions) return [];\r\n    \r\n    const years = new Set();\r\n    data.transactions.forEach(tx => {\r\n      if (tx.taxYear) years.add(tx.taxYear);\r\n    });\r\n    \r\n    return Array.from(years).sort();\r\n  }, [data]);\r\n\r\n  // Extract unique assets\r\n  const assets = useMemo(() => {\r\n    if (!data || !data.transactions) return [];\r\n    \r\n    const assetSet = new Set();\r\n    data.transactions.forEach(tx => {\r\n      if (tx.currency) assetSet.add(tx.currency);\r\n      if (tx.fromCurrency) assetSet.add(tx.fromCurrency);\r\n      if (tx.toCurrency) assetSet.add(tx.toCurrency);\r\n    });\r\n    \r\n    return Array.from(assetSet).sort();\r\n  }, [data]);\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleBackToUpload = () => {\r\n    navigate('/process');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"dashboard-loading\">\r\n        <div className=\"spinner\"></div>\r\n        <p>Loading dashboard...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data) {\r\n    return (\r\n      <div className=\"dashboard-empty\">\r\n        <h2>No Data Available</h2>\r\n        <p>Please upload a transaction file to view your tax report.</p>\r\n        <button className=\"btn btn-primary\" onClick={handleBackToUpload}>\r\n          üìÅ Upload Transactions\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <header className=\"dashboard-header\">\r\n        <div className=\"header-content\">\r\n          <button className=\"back-btn\" onClick={handleBackToUpload}>\r\n            ‚Üê Upload New File\r\n          </button>\r\n          <h1>üìä Crypto Tax Dashboard</h1>\r\n          <p className=\"header-subtitle\">SARS-Ready Capital Gains Report</p>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"dashboard-container\">\r\n        {/* Red Flags / Suspicious Transaction Summary - Always show */}\r\n        <SuspiciousTransactionSummary\r\n          redFlags={data.red_flags || []}\r\n          summary={data.red_flag_summary || { \r\n            total_flags: 0, \r\n            critical_count: 0, \r\n            high_count: 0, \r\n            medium_count: 0, \r\n            low_count: 0, \r\n            audit_risk_score: 0 \r\n          }}\r\n          auditRiskLevel={data.audit_risk_level || 'MINIMAL - No significant issues detected'}\r\n          hasCriticalIssues={data.has_critical_issues || false}\r\n        />\r\n\r\n        {/* Tax Status Summary - Always show */}\r\n        <TaxStatusSummary\r\n          taxStatus={data.tax_status || {\r\n            non_taxable_events: [],\r\n            taxable_events: [],\r\n            summary: {\r\n              total_events: 0,\r\n              non_taxable_count: 0,\r\n              taxable_count: 0,\r\n              buy_count: 0,\r\n              transfer_count: 0,\r\n              sell_count: 0,\r\n              trade_count: 0\r\n            },\r\n            tax_obligation_exists: false\r\n          }}\r\n        />\r\n\r\n        {/* Summary Cards */}\r\n        <SummaryCards \r\n          summary={filteredSummary} \r\n          taxYears={taxYears}\r\n          selectedTaxYear={filters.taxYear}\r\n          onTaxYearChange={(year) => setFilters({...filters, taxYear: year})}\r\n        />\r\n\r\n        {/* Charts Section */}\r\n        <Charts \r\n          transactions={filteredTransactions}\r\n          summary={filteredSummary}\r\n        />\r\n\r\n        {/* Filter Panel */}\r\n        <FilterPanel\r\n          filters={filters}\r\n          onFilterChange={handleFilterChange}\r\n          assets={assets}\r\n          taxYears={taxYears}\r\n        />\r\n\r\n        {/* Enhanced Transaction Table with FIFO Details */}\r\n        <TransactionTableEnhanced \r\n          transactions={filteredTransactions}\r\n        />\r\n\r\n        {/* Export Buttons */}\r\n        <ExportButtons \r\n          transactions={filteredTransactions}\r\n          summary={filteredSummary}\r\n          filters={filters}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}